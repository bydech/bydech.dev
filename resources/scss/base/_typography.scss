// ------------------------------------------------------
// TYPOGRAPHY SYSTEM – bydech.dev
// ------------------------------------------------------

// 1. Dependency Imports
// Assumes clamp-calc, px-to-rem, breakpoints, etc. are exported from this index
@use "../abstracts/index" as *;

// ------------------------------------------------------
// 1. Font Families
// ------------------------------------------------------
$font-sans:
  ibmplex,
  system-ui,
  -apple-system,
  sans-serif;
$font-mono:
  jetbrains,
  Roboto Mono,
  monospace;

// ------------------------------------------------------
// 2. Mixins
// ------------------------------------------------------

@mixin type-sans($size, $line, $weight: 400, $tracking: 0) {
  font-weight: $weight;
  font-size: $size; // can be rem or clamp(...)
  line-height: $line; // unitless
  font-family: $font-sans;
  letter-spacing: $tracking;
}

@mixin type-mono($size, $line, $weight: 500, $tracking: 0) {
  font-weight: $weight;
  font-size: $size; // can be rem or clamp(...)
  line-height: $line; // unitless
  font-family: $font-mono;
  font-variant-numeric: tabular-nums;
  letter-spacing: $tracking;
}

// ------------------------------------------------------
// 3. Abstract Styles (Placeholders)
// ------------------------------------------------------
// We use %placeholders so we can extend them without bloating CSS

// // Display: scales from 40px → 64px between 20rem and $bp-xl
%heading-display {
  @include type-mono(clamp-calc(40, 64), 1.1, 600, -0.02em);
}

// H1: 32px → 48px
%heading-h1 {
  @include type-mono(clamp-calc(40, 48), 1.1, 600, 0);
}

// H2: 28px → 36px
%heading-h2 {
  @include type-mono(clamp-calc(30, 32), 1.2, 600, 0);
}

// H3: 24px → 28px
%heading-h3 {
  @include type-mono(clamp-calc(22, 24), 1.3, 500, 0);
}

// H4: static 20px
%heading-h4 {
  @include type-mono(px-to-rem(20), 1.4, 500, 0);
}

// Body text
// Note: 18 → 16 means slightly larger on small screens, smaller on large.
%body-large {
  @include type-sans(clamp-calc(17, 18), 1.35, 400, 0.005em);
}

%body-default {
  @include type-sans(clamp-calc(16, 17), 1.35, 400, 0.005em);
}

// Small body: 16 → 14
%body-small {
  @include type-sans(clamp-calc(15, 16), 1.35, 400, 0.005em);
}

// Mono eyebrow / label, static 14px
%eyebrow {
  @include type-mono(px-to-rem(14), 1, 400);
}

// // ------------------------------------------------------
// // 4. Classes (For use in HTML)
// // ------------------------------------------------------

.heading-display {
  @extend %heading-display;
}
.heading-h1 {
  @extend %heading-h1;
}
.heading-h2 {
  @extend %heading-h2;
}
.heading-h3 {
  @extend %heading-h3;
}
.heading-h4 {
  @extend %heading-h4;
}

.body-large {
  &,
  & > p {
    @extend %body-large;
  }
}
.body-default {
  &,
  & > p {
    @extend %body-default;
  }
}
.body-small {
  &,
  & > p {
    @extend %body-small;
  }
}

.eyebrow {
  @extend %eyebrow;
}

// // ------------------------------------------------------
// // 5. Global Resets (Attaching to Tags)
// // ------------------------------------------------------

h1,
h2,
h3,
h4,
h5,
h6,
p,
ul,
ol,
dl,
figure,
blockquote {
  margin: 0;
}

h1 {
  @extend %heading-h1;
  margin-bottom: 0.5em;
  color: var(--text-primary);
}

h2 {
  @extend %heading-h2;
  margin-bottom: 0.5em;
  color: var(--text-primary);
}

h3 {
  @extend %heading-h3;
  margin-bottom: 0.5em;
  color: var(--text-primary);
}

h4 {
  @extend %heading-h4;
  margin-bottom: 0.5em;
  color: var(--text-primary);
}

p {
  @extend %body-default;
  max-width: 60ch;
  color: var(--text-secondary);
}

small {
  @extend %body-small;
  color: var(--text-secondary);
}

// // ------------------------------------------------------
// // 6. Spacing Utilities
// // ------------------------------------------------------

.flow > * + * {
  margin-top: var(--flow-space, 1.5em);
}

.flow--tight {
  --flow-space: 0.75em;
}

.flow--loose {
  --flow-space: 3em;
}

.mb-1 {
  margin-bottom: 0.5rem;
}
.mb-2 {
  margin-bottom: 1rem;
}
.mb-4 {
  margin-bottom: 2rem;
}
.mb-8 {
  margin-bottom: 4rem;
}
